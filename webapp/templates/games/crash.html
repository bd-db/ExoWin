{% extends "base.html" %}

{% block title %}Crash Game - Gamble Bot{% endblock %}
{% block game_title %}ðŸš€ Crash{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/crash.css') }}">
{% endblock %}

{% block content %}
<div class="game-area">
    <!-- Crash Multiplier Display -->
    <div class="crash-display">
        <div class="multiplier-container">
            <div class="multiplier-value" id="multiplier">1.00x</div>
            <div class="crash-status" id="crash-status">Waiting for next round...</div>
        </div>
        
        <!-- Crash Graph -->
        <div class="crash-graph">
            <canvas id="crashGraph" width="300" height="200"></canvas>
        </div>
    </div>
    
    <!-- Betting Controls -->
    <div class="betting-controls">
        <div class="input-group">
            <label class="input-label" for="betAmount">Bet Amount ($)</label>
            <input type="number" id="betAmount" class="input-field" min="0.01" step="0.01" value="1.00" placeholder="Enter bet amount">
        </div>
        
        <div class="input-group">
            <label class="input-label" for="autoCashout">Auto Cashout (Multiplier)</label>
            <input type="number" id="autoCashout" class="input-field" min="1.01" step="0.01" value="2.00" placeholder="Auto cashout at">
        </div>
        
        <div class="game-controls">
            <button class="btn btn-primary" id="placeBetBtn" onclick="placeBet()">
                ðŸ’° Place Bet
            </button>
            <button class="btn btn-warning hidden" id="cashoutBtn" onclick="cashOut()">
                ðŸ’¸ Cash Out
            </button>
        </div>
        
        <!-- Quick Bet Buttons -->
        <div class="quick-bets">
            <button class="btn btn-secondary btn-small" onclick="setBetAmount(0.50)">$0.50</button>
            <button class="btn btn-secondary btn-small" onclick="setBetAmount(1.00)">$1.00</button>
            <button class="btn btn-secondary btn-small" onclick="setBetAmount(5.00)">$5.00</button>
            <button class="btn btn-secondary btn-small" onclick="setBetAmount(10.00)">$10.00</button>
        </div>
    </div>
    
    <!-- Game Result -->
    <div class="result-display hidden" id="gameResult">
        <div class="result-message" id="resultMessage"></div>
        <div class="result-amount" id="resultAmount"></div>
    </div>
    
    <!-- Game Stats -->
    <div class="game-stats">
        <div class="stat-item">
            <div class="stat-value" id="totalBets">{{ user.get('total_bets', 0) }}</div>
            <div class="stat-label">Total Bets</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="totalWins">{{ user.get('total_wins', 0) }}</div>
            <div class="stat-label">Wins</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="winRate">{{ "%.1f"|format((user.get('total_wins', 0) / user.get('total_bets', 1) * 100)) }}%</div>
            <div class="stat-label">Win Rate</div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/crash.js') }}"></script>
{% endblock %}